<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">

	<insert id="insertUser" parameterType="HashMap">
		<![CDATA[
			INSERT INTO user
			(
			    id,
			    password,
			    name,
			   	nickname,
			   	join_type,
			   	email,
			   	gender,
			   	birth,
			   	grade,
			   	role,
			   	reg_dt
			)
			VALUES
			(
				#{id},
				#{password},
				#{name},
				#{nickname},
				'01',
				#{email},
				#{gender},
				#{birth},
				'01',
				'USER',
			    now()
			)
		]]>
	</insert>


	<select id="findUser" parameterType="map" resultType="int">
		<![CDATA[
			SELECT COUNT(*) FROM user
			WHERE
				1=1
		]]>
		<if test='id != null'>
			AND id = #{id}
		</if>
		<if test='nickname != null'>
			AND nickname = #{nickname}
		</if>
	</select>

	<select id="getUserInfo" parameterType="map" resultType="com.company.lottomon.model.UserInfo">
		<![CDATA[
		SELECT * FROM user WHERE
			id = #{id}
		]]>
	</select>

	<select id="loginProc" parameterType="map" resultType="com.company.lottomon.model.UserInfo">
		<![CDATA[
		SELECT * FROM user WHERE
			id = #{id}
		AND
			password = #{password}
		]]>
	</select>

	<!--<select id="SnsLoginProc" parameterType="map" resultType="com.company.lottomon.model.UserInfo">
		<![CDATA[
		SELECT * FROM user WHERE
			email = #{email} AND join_type = #{join_type} AND sns_tocken = #{sns_tocken}
		]]>
	</select>-->

	<select id="loginChk" parameterType="map" resultType="com.company.lottomon.model.UserInfo">
		<![CDATA[
		SELECT * FROM user WHERE
			id = #{email} AND join_type = '01'
		]]>
	</select>

</mapper>
