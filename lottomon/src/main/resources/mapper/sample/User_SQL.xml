<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">

	<insert id="insertUser" parameterType="HashMap">
		<![CDATA[
			INSERT INTO user
			(
			    id, 
			    password, 
			    name, 
			   	nickname,
			   	join_type,
			   	email,
			   	gender,
			   	birth,
			   	grade,
			   	role,
			   	reg_dt
			)
			VALUES
			(
				#{id},
				#{password},
				#{name},
				#{nickname},
				'01',
				#{email},
				#{gender},
				#{birth},
				'01',
				'USER',
			    now()
			)
		]]>
	</insert>
	
	
	<select id="findUser" parameterType="map" resultType="int">
		<![CDATA[
			SELECT COUNT(*) FROM user
			WHERE
				1=1
		]]>
		<if test='id != null'>
			AND id = #{id}
		</if>
		<if test='nickname != null'>
			AND nickname = #{nickname}
		</if>
	</select>
	
	<select id="loginProc" parameterType="map" resultType="com.company.lottomon.model.UserInfo">
		<![CDATA[
		SELECT * FROM user WHERE
			id = #{id}
		AND
			password = #{password}
		]]>
	</select>

</mapper>